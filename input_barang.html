<!DOCTYPE html>
<html>
<head>
  <title>Inventaris Barang</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="container">
    <section id="menu">
      <nav class="navbar fixed-top navbar-light bg-dark sticky-top">
        <ul>
          <li><a href="index.html">Beranda</a></li>
          <li><a href="data_barang.html">Data Barang</a></li>
          <li><a href="input_barang.html">Input Barang</a></li>
          <li><a href="pinjam_alat.html">Pinjam Alat</a></li>
          <li><a href="tentang_kami.html">Tentang Kami</a></li>
        </ul>
        <a href="#" class="btn btn-white" onclick="window.app.logout()">Logout</a>
      </nav>
    </section>
  </div>

  <section class="navy" id="section1">
    <div class="content">
      <img align="left" src="image/LogoIPB.png" width="400px">
      <h1 align="right">Inventaris Barang Lab Komputer</h1>
      <p align="right">Inventaris Barang Lab Komputer Sekolah Vokasi Institut Pertanian Bogor</p>
    </div>
  </section>

  <section class="white" id="section2"><br>
    <div id="alertBox" align="center"></div>
    <h2 align="center">Form Input Barang</h2><br>

    <form id="inputBarangForm">
      <table width="500" align="center" border="0">
        <td>
          <label for="basic-url">Kode Alat</label>
          <div class="input-group mb-3">
            <input type="text" name="kd_alat" class="form-control" placeholder="Kode Alat">
          </div>

          <label for="basic-url">Kategori</label>
          <div class="input-group mb-3">
            <select name="kategori" class="form-control" required>
              <option value="Network Device">Network Device</option>
              <option value="PC">PC</option>
              <option value="Sparepart">Sparepart</option>
              <option value="Printer">Printer</option>
              <option value="Alat">Alat</option>
              <option value="Lainnya">Lainnya</option>
            </select>
          </div>

          <label for="basic-url">Merek</label>
          <div class="input-group mb-3">
            <input type="text" name="merek" class="form-control" placeholder="Merek">
          </div>

          <label for="basic-url">Nama Alat</label>
          <div class="input-group mb-3">
            <input type="text" name="nama_alat" class="form-control" placeholder="Nama Alat">
          </div>

          <label for="basic-url">Spesifikasi</label>
          <div class="input-group">
            <textarea class="form-control" cols="50" name="spek" aria-label="With textarea"></textarea>
          </div>

          <label for="basic-url">Jumlah</label>
          <div class="input-group mb-3">
            <input type="text" name="jml" class="form-control" placeholder="Jumlah">
          </div>
          <br>
          <div class="input-group mb-3">
            <button class="btn btn-primary btn-flat btn-block">Simpan</button>
          </div>
        </td>
      </table>
    </form>
  </section>

  <section class="navy" id="section3">
    <div class="content">
      <h4>CONTACT US</h4>
      <span>Jl. Kumbang No. 14 Cilibende Bogor, Jawa Barat, Indonesia</span><br>
      <span>Phone: (0251) 8329101</span><br>
      <span>E-mail: sv@apps.ipb.ac.id.</span><br>
    </div>
    <div class="clear"></div>
  </section>

  <section class="gray" id="section4">
    <div class="content">
      <p>Copyright Â© 2019 - Developed by Kelompok 6</p>
    </div>
  </section>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
  <script src="app.js"></script>
  <script>
    window.app.requireAuth();
    const alertBox = document.getElementById('alertBox');
    const pesan = window.app.getQueryParam('pesan');
    if (pesan === 'terinput') {
      alertBox.innerHTML = '<div class="alert alert-info" role="alert">Data telah terinput ke database.</div>';
    }

    document.getElementById('inputBarangForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      alertBox.innerHTML = '';
      const formData = new FormData(e.target);
      const payload = Object.fromEntries(formData.entries());
      try {
        await window.app.apiJson('/api/barang', {
          method: 'POST',
          body: JSON.stringify(payload)
        });
        window.location.href = 'input_barang.html?pesan=terinput';
      } catch (err) {
        alertBox.innerHTML = `<div class="alert alert-danger" role="alert">${err.message}</div>`;
      }
    });
  </script>
</body>
</html>
