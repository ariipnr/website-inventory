<!DOCTYPE html>
<html>
<head>
  <title>Generate Barcode</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
</head>
<body>
  <div id="container">
    <section id="menu">
      <nav class="navbar navbar-light bg-dark">
        <ul>
          <li><a href="index.html">Beranda</a></li>
          <li><a href="data_barang.html">Data Barang</a></li>
          <li><a href="input_barang.html">Input Barang</a></li>
          <li><a href="pinjam_alat.html">Pinjam Alat</a></li>
          <li><a href="tentang_kami.html">Tentang Kami</a></li>
        </ul>
        <a href="#" class="btn btn-white" onclick="window.app.logout()">Logout</a>
      </nav>
    </section>
  </div>

  <section class="navy" id="section1">
    <div class="content">
      <img align="left" src="image/LogoIPB.png" width="400px">
      <h1 align="right">Inventaris Barang Lab Komputer</h1>
      <p align="right">Inventaris Barang Lab Komputer Sekolah Vokasi Institut Pertanian Bogor</p>
    </div>
  </section>

  <section class="white" id="section2"><br><br>
    <div class="content" align="center">
      <h2>Barcode</h2>
      <svg id="barcode"></svg>
      <div class="mt-3">
        <button class="btn btn-primary" onclick="window.print()">Print</button>
      </div>
    </div>
  </section>

  <section class="navy" id="section3">
    <div class="content">
      <h4>CONTACT US</h4>
      <span>Jl. Kumbang No. 14 Cilibende Bogor, Jawa Barat, Indonesia</span><br>
      <span>Phone: (0251) 8329101</span><br>
      <span>E-mail: sv@apps.ipb.ac.id.</span><br>
    </div>
    <div class="clear"></div>
  </section>

  <section class="gray" id="section4">
    <div class="content">
      <p>Copyright Â© 2019 - Developed by Kelompok 6</p>
    </div>
  </section>

  <script src="app.js"></script>
  <script>
    window.app.requireAuth();
    const id = window.app.getQueryParam('no');
    if (!id) {
      alert('ID tidak ditemukan');
      window.location.href = 'data_barang.html';
    }

    async function loadBarcode() {
      const data = await window.app.apiJson(`/api/barang?id=${id}`);
      const text = data && data.kode_alat ? data.kode_alat : '';
      if (!text) {
        alert('Kode alat tidak ditemukan');
        return;
      }
      JsBarcode('#barcode', text, {
        format: 'CODE39',
        lineColor: '#000',
        width: 2,
        height: 80,
        displayValue: true
      });
    }

    loadBarcode().catch((err) => alert(err.message));
  </script>
</body>
</html>
